package org.lens.utils;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONObject;
import org.json.JSONTokener;
import org.utils.Search;

public class Classification extends Search{

	public Classification(String type, String symbol) {
		super(BASE_URL+type+"/ancestorsAndSelf?"+"symbol="+symbol);
		// TODO Auto-generated constructor stub
	}
	private static final String BASE_URL="http://pat-clas.t3as.org/pat-clas-service/rest/v1.0/";
	
	public List<String> translateCodeToText(){
		InputStream inputStream=this.getSearchResult();
		List<String> textList=new ArrayList<String>();
		BufferedReader br = new BufferedReader(new InputStreamReader(
				inputStream));
		try {
			String s = "";
			String result="";
			while ((s = br.readLine()) != null) {
				result+=s;
			}
			JSONArray jsonArray=new JSONArray(result);
			for(int i=0;i<jsonArray.length();i++){
			JSONObject textBody=jsonArray.getJSONObject(i);			
			textList.add(textBody.get("textBody").toString());
			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		return textList;
	}
	
	public static void main(String[] args ){
		Classification classi=new Classification("IPC", "A61");
		System.out.print(classi.translateCodeToText().get(0));
		
	}
}
