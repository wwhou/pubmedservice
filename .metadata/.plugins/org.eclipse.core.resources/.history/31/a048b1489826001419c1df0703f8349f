package org.IEEE.client;

import java.util.Collection;

import javax.ws.rs.core.MediaType;

import org.IEEE.utils.IEEEParameter;
import org.codehaus.jackson.jaxrs.JacksonJsonProvider;
import org.pubMed.utils.ObjectMapperProvider;
import org.utils.UniversalClient;
import org.utils.jaxb.Article;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.GenericType;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;

public class IEEEClient extends UniversalClient{
	//private final WebResource service;
//	private static final String DEFAULT_BASE_URL="http://localhost:8080/DataCollectionService/";
	private static final String IEEE_SERVICE_PATH="rest/search/ieee/article";
	
	public IEEEClient(final String url){
		super( url, IEEE_SERVICE_PATH);
	}
	public IEEEClient(){
		super(IEEE_SERVICE_PATH);
	}
	
//	public IEEEClient(final String url){
//		final ClientConfig config = new DefaultClientConfig();
//        config.getClasses().add(JacksonJsonProvider.class);
//        config.getClasses().add(ObjectMapperProvider.class);
//        final Client client = Client.create(config);
//        service = client.resource(url + IEEE_SERVICE_PATH);
//	}
//	
//	 public Collection<Article> call(final IEEEParameter request) {
//	        ClientResponse response = null;
//	        try {
//	            response = service.type(MediaType.APPLICATION_JSON)
//	                              .accept(MediaType.APPLICATION_JSON)
//	                              .post(ClientResponse.class, request);
//	            return response.getEntity(new GenericType<Collection<Article>>() {});
//	        }
//	        finally {
//	            // belt and braces
//	            if (response != null) {
//	                //noinspection OverlyBroadCatchBlock
//	                try { response.close(); }
//	                catch (final Throwable ignored) { /* do nothing */ }
//	            }
//	        }
//	    }
}
